<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="How to run Eclipse debug sessions using QEMU Arm.">
<meta name="keywords" content=" ">
<title>The QEMU debugging plug-in | Eclipse Embedded CDT  (C/C++ Development Tools)™</title>
<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/syntax.css">


<link type="application/atom+xml" rel="alternate" href="https://eclipse-embed-cdt.github.io/feed.xml"/>
<link type="application/rss+xml" rel="alternate" title="" href="https://eclipse-embed-cdt.github.io/feed.xml">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>The QEMU debugging plug-in</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="The QEMU debugging plug-in" />
<meta name="author" content="Liviu Ionescu" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Tools to manage, configure and build complex, package based, multi-target, C/C++ projects." />
<meta property="og:description" content="Tools to manage, configure and build complex, package based, multi-target, C/C++ projects." />
<link rel="canonical" href="https://eclipse-embed-cdt.github.io/debug/qemu/" />
<meta property="og:url" content="https://eclipse-embed-cdt.github.io/debug/qemu/" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-09-11T19:15:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="The QEMU debugging plug-in" />
<script type="application/ld+json">
{"description":"Tools to manage, configure and build complex, package based, multi-target, C/C++ projects.","@type":"BlogPosting","url":"https://eclipse-embed-cdt.github.io/debug/qemu/","headline":"The QEMU debugging plug-in","dateModified":"2021-01-21T08:01:19+00:00","datePublished":"2015-09-11T19:15:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://eclipse-embed-cdt.github.io/debug/qemu/"},"author":{"@type":"Person","name":"Liviu Ionescu"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/modern-business.css?202008050934">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/customstyles.css?202008050934">
<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/boxshadowproperties.css?202008050934">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/theme-blue.css?202008050934">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://eclipse-embed-cdt.github.io/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="https://eclipse-embed-cdt.github.io/js/toc.js"></script>
<script src="https://eclipse-embed-cdt.github.io/js/customscripts.js"></script>

<!-- Use absolute URLs, to cover preview cases too -->
<link rel="shortcut icon" href="https://eclipse-embed-cdt.github.io/images/favicon/favicon.ico">
<link rel="apple-touch-icon" sizes="57x57" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://eclipse-embed-cdt.github.io/images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://eclipse-embed-cdt.github.io/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://eclipse-embed-cdt.github.io/images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://eclipse-embed-cdt.github.io/images/favicon/favicon-16x16.png">
<link rel="manifest" href="https://eclipse-embed-cdt.github.io/images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="https://eclipse-embed-cdt.github.io/images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks" style="">
        <div style="display: inline-block; float: left; margin-top: 8px; margin-left: auto; margin-right: 10px;"><img src="/images/company_logo.png" alt="logo" width="32px" height="32px"/></div>
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/">&nbsp;<span class="projectTitle"> Eclipse Embedded CDT (C/C++ Development Tools)™</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">News<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/news/">Latest News</a></li>
                        
                        
                        
                        <li><a href="/news/archive/">Archive</a></li>
                        
                        
                        
                        <li><a href="/plugins/releases/">Plug-ins Releases</a></li>
                        
                        
                        
                        <li><a href="/packages/releases/">Packages Releases</a></li>
                        
                        
                        
                        <li><a href="/tags/">Tags</a></li>
                        
                        
                        
                        <li><a href="/articles/">Articles</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Links<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://www.tapatalk.com/groups/xpack/" target="_blank" rel="noopener">The Project Forums</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://gitter.im/xpack/" target="_blank" rel="noopener">The Project Chat Room</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://www.eclipse.org" target="_blank" rel="noopener">Eclipse</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://projects.eclipse.org/projects/iot.embed-cdt/" target="_blank" rel="noopener">Eclipse Embedded CDT Project</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://marketplace.eclipse.org/content/eclipse-embedded-cdt/" target="_blank" rel="noopener">Eclipse Marketplace</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://xpack.github.io" target="_blank" rel="noopener">The xPack Project</a></li>
                        
                        
                        
                        <li><a class="extern" href="http://micro-os-plus.github.io" target="_blank" rel="noopener">µOS++</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://gnu-mcu-eclipse.github.io" target="_blank" rel="noopener">GNU MCU Eclipse (deprecated)</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">GitHub<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://github.com/eclipse-embed-cdt/" target="_blank" rel="noopener">Eclipse Embedded CDT</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack/" target="_blank" rel="noopener">xPack Core Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack-dev-tools/" target="_blank" rel="noopener">3rd Party xPack Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpacks/" target="_blank" rel="noopener">3rd Party xPacks</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/micro-os-plus/" target="_blank" rel="noopener">µOS++</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="The QEMU debugging plug-in">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3 sticky" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  
  
  <li>
      <a title="Getting Started" href="#">Getting Started</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Features" href="/plugins/features/">Features</a></li>
          
          
          
          
          
          
          <li><a title="Prerequisites" href="/plugins/prerequisites/">Prerequisites</a></li>
          
          
          
          
          
          
          <li><a title="Install a New Eclipse" href="/plugins/install/">Install a New Eclipse</a></li>
          
          
          
          
          
          
          <li><a title="Update an Existing Eclipse" href="/plugins/update/">Update an Existing Eclipse</a></li>
          
          
          
          
          
          
          <li><a title="Install Optional Features" href="/plugins/install-new-software/">Install Optional Features</a></li>
          
          
          
          
          
          
          <li><a title="Alternate Install Methods" href="/plugins/install-alternate/">Alternate Install Methods</a></li>
          
          
          
          
          
          
          <li><a title="Workspace Preferences" href="/eclipse/workspace/preferences/">Workspace Preferences</a></li>
          
          
          
          
          
          
          <li><a title="CMSIS Packs" href="/plugins/packs-manager/">CMSIS Packs</a></li>
          
          
          
          
          
          
          <li><a title="SEGGER J-Link" href="/debug/jlink/install/">SEGGER J-Link</a></li>
          
          
          
          
          
          
          <li><a title="Troubleshoot" href="/plugins/troubleshoot/">Troubleshoot</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Debug" href="#">Debug</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/debug/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Install" href="/debug/install/">Install</a></li>
          
          
          
          
          
          
          <li><a title="J-Link" href="/debug/jlink/">J-Link</a></li>
          
          
          
          
          
          
          <li><a title="OpenOCD" href="/debug/openocd/">OpenOCD</a></li>
          
          
          
          
          
          
          <li><a title="OpenOCD RISC-V" href="/debug/openocd/riscv/">OpenOCD RISC-V</a></li>
          
          
          
          
          
          
          <li class="active"><a title="QEMU Arm" href="/debug/qemu/">QEMU Arm</a></li>
          
          
          
          
          
          
          <li><a title="Assign CMSIS Device" href="/eclipse/project/assign-device/">Assign CMSIS Device</a></li>
          
          
          
          
          
          
          <li><a title="Peripheral Registers" href="/debug/peripheral-registers/">Peripheral Registers</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Tutorials" href="#">Tutorials</a>
      <ul>
          
          
          
          <li><a title="Blinky Arm Tutorial" href="/tutorials/blinky-arm/">Blinky Arm Tutorial</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="How It Works" href="#">How It Works</a>
      <ul>
          
          
          
          <li><a title="The Managed Build System" href="/eclipse/cdt/managed-build/">The Managed Build System</a></li>
          
          
          
          
          
          
          <li><a title="The CDT Indexer" href="/eclipse/cdt/indexer/">The CDT Indexer</a></li>
          
          
          
          
          
          
          <li><a title="The Hardware Debug Plug-ins" href="/eclipse/cdt/hardware-debug/">The Hardware Debug Plug-ins</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Project Templates" href="#">Project Templates</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/templates/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="STM32Fxx Templates" href="/templates/stm32f/">STM32Fxx Templates</a></li>
          
          
          
          
          
          
          <li><a title="KLxx Templates" href="/templates/klxx/">KLxx Templates</a></li>
          
          
          
          
          
          
          <li><a title="Generic Cortex-M Template" href="/templates/cortexm/">Generic Cortex-M Template</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Support" href="#">Support</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/support/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="FAQ" href="/support/faq/">FAQ</a></li>
          
          
          
          
          
          
          <li><a title="Known Issues" href="/support/known-issues/">Known Issues</a></li>
          
          
          
          
          
          
          <li><a class="extern" title="The Project Forums" href="https://www.tapatalk.com/groups/xpack/" target="_blank" rel="noopener">The Project Forums</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Contributor Info" href="#">Contributor Info</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/develop/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Links" href="/develop/links/">Links</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Maintainer Info" href="#">Maintainer Info</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/maintain/">Overview</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Project" href="#">Project</a>
      <ul>
          
          
          
          <li><a title="Plug-ins Releases" href="/plugins/releases/">Plug-ins Releases</a></li>
          
          
          
          
          
          
          <li><a title="Packages Releases" href="/packages/releases/">Packages Releases</a></li>
          
          
          
          
          
          
          <li><a class="extern" title="License (EPL-2)" href="https://www.eclipse.org/legal/epl-2.0/" target="_blank" rel="noopener">License (EPL-2)</a></li>
          
          
          
          
          
          
          <li><a title="About" href="/about/">About</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">The QEMU debugging plug-in</h1>
</div>



<div class="post-content">

   
    <div class="summary">How to run Eclipse debug sessions using QEMU Arm.
</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


   <h2 id="quicklinks">Quicklinks</h2>

<p>If you already know what are the features of the new plug-in and only
want to know how to install/use it, you can directly skip to:</p>

<ul>
  <li><a href="https://xpack.github.io/qemu-arm/install/">xPack QEMU Arm install</a></li>
  <li><a href="/debug/qemu/#how-to-use-the-qemu-plug-in">QEMU plug-in usage</a></li>
</ul>

<h2 id="why-a-new-plug-in">Why a new plug-in?</h2>

<p>The short answer is: because a debugging plug-in provides the best
integration of the emulator into the Eclipse debugger, making debugging
in an emulated environment more convenient than on physical boards.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before being able to use QEMU with Eclipse Embedded CDT, you must
separately install:</p>

<ul>
  <li>the QEMU debugging plug-in</li>
  <li>the GDB debugger (client) application, as part of a GNU toolchain</li>
  <li>the xPack QEMU Arm.</li>
</ul>

<p>If you did not do it yet, please follow the instructions in the
<a href="https://xpack.github.io/qemu-arm/install/">xPack QEMU Arm install</a>
page and return when completed.</p>

<p>The presence of a GDB as part of a GNU toolchain is mandatory, and
it is recommended that the version of the GDB client matches the
toolchain. Generally only debugging .elf applications is possible,
and these applications must be compiled to include GNU compatible
debugging information (like dwarf).</p>

<h2 id="how-to-use-the-qemu-plug-in">How to use the QEMU plug-in</h2>

<h3 id="define-the-qemufolder-location">Define the QEMU folder location</h3>

<p>Before starting work with QEMU, it is required to define the path
to the QEMU folder.</p>

<ul>
  <li>
    <p>in the <em>Eclipse</em> menu, go to <strong>(Window →) Preferences</strong> → <strong>MCU</strong> →
<strong>Global QEMU Path</strong> (or <strong>Workspace QEMU Path</strong>)</p>

    <p><img src="/assets/images/2018/qemu-preferences.png" alt="The QEMU preferences page" /></p>
  </li>
  <li>click the <strong>Restore Defaults</strong> button</li>
  <li>the plug-in will suggest the default values computed when Eclipse
started; if a new version of xPack QEMU Arm was installed while
Eclipse was active, restart Eclipse and click again the Restore
Defaults button</li>
  <li>check the <em>Executable:</em> field; it must define the name of the QEMU
executable; in most cases it should be already set correctly; if not,
edit it to match the correct name;</li>
  <li>check the <em>Folder:</em> field; it must point to the actual folder where
the xPack QEMU Arm was installed on your system, for example
<code class="language-plaintext highlighter-rouge">/Users/ilg/opt/xPacks/qemu-arm/&lt;version&gt;/bin</code> on macOS</li>
  <li>click the <strong>OK</strong> button</li>
</ul>

<p>By default, the GDB server is defined as
<code class="language-plaintext highlighter-rouge">${qemu_path}/${qemu_executable}</code>; these two macros are
automatically set by the above preference page; for portability
reasons, it is recommended to keep this definition in all your
debug configurations, and also to have a single place to update
the path when a new version of the xPack QEMU Arm is released.</p>

<h3 id="associate-a-device-to-the-project">Associate a device to the project</h3>

<p>Although not absolutely mandatory, it is recommended to associate
a device to the project, so that creating the debugger launch
configuration will automatically fill-in the device name.</p>

<p><img src="/assets/images/2013/10/Devices.png" alt="Assigning a device to the project" /></p>

<p>Follow the steps in the separate page <a href="/eclipse/project/assign-device/">Associate a device to the
project</a> and
return to this page to continue.</p>

<h3 id="create-the-debugger-launch-configuration">Create the debugger launch configuration</h3>

<p>Being a standard debugger, this plug-in also uses the Eclipse
standard method of creating debugger configurations for each
application. After you successfully build your application,
you can create a new debug configuration following these steps:</p>

<ul>
  <li>select the project</li>
  <li>build it and ensure the executable file is available</li>
  <li>expand either the Debug or the Release folder and select the
executable you want to debug</li>
  <li>
    <p>in the <em>Eclipse</em> menu, go to <strong>Run</strong> → <strong>Debug Configurations…</strong>
or select the down arrow at the right of the bug icon.</p>

    <p><img src="/assets/images/2013/10/HelloBuildResult.png" alt="The build result" /></p>
  </li>
  <li>
    <p>double click the <strong>GDB QEMU Debugging</strong> group, or select it and
click the top leftmost <strong>New</strong> button.</p>

    <p><img src="/assets/images/2015/04/QEMU_Debugging.png" alt="Create a new QEMU launch configuration" /></p>
  </li>
  <li>a multi-tab page will be displayed;</li>
  <li>
    <p>if you started this procedure with the project selected and
the project was previously built, the first tab, named <strong>Main</strong>,
should be already filled in with the project name (for example hello)
and the application file name and location (for example <code class="language-plaintext highlighter-rouge">Debug/hello.elf</code>).</p>

    <p><img src="/assets/images/2015/04/HelloMainTab.png" alt="The Main tab" /></p>
  </li>
  <li>
    <p>click the second tab, named <strong>Debugger</strong>, which contains the
configuration options required to start QEMU as a GDB server
and the GDB client.</p>

    <p><img src="/assets/images/2015/04/HelloDebuggerTab.png" alt="The Debugger tab at first run" /></p>
  </li>
  <li>at your first run it is recommended to leave the Board name:
field as it is, with a question mark, for the emulator to
display the list of supported boards.</li>
  <li>although not mandatory, it is recommended to change the
location where the launcher file is stored; for this,
    <ul>
      <li>select the <strong>Common</strong> tab,</li>
      <li>set the <em>Save as:</em> field to <strong>Shared file</strong></li>
      <li>accept the current project name.</li>
      <li>click the <strong>Apply</strong> button</li>
    </ul>

    <p><img src="/assets/images/2015/04/HelloCommonTab.png" alt="Store the debug configuration in the project" /></p>
  </li>
  <li>click the <strong>Close</strong> button.</li>
</ul>

<p>With the above settings, the debug configuration will be saved
in the project, not in the workspace storage.</p>

<p><img src="/assets/images/2015/04/LauncherInProject.png" alt="The debug launch configuration stored in the project folder" /></p>

<h2 id="start-a-debug-session">Start a debug session</h2>

<p>With all the above steps completed properly, you can start the debug session:</p>

<ul>
  <li>in the <em>Eclipse</em> menu, go to <strong>Run</strong> → <strong>Debug Configurations…</strong></li>
  <li>if necessary, expand the <strong>GDB QEMU Debugging</strong> group</li>
  <li>select the newly defined <strong>hello</strong> configuration</li>
  <li>click the bottom <strong>Debug</strong> button</li>
</ul>

<p>Alternatively, on subsequent runs, you can use the bug specific icon.
By default this will start the previously used debug launch configuration;
to start a different configuration, use the down arrow button:</p>

<p><img src="/assets/images/2015/04/DebugDownArrow.png" alt="The debugger down arrow selection" /></p>

<p>If everything is ok, after a few seconds required to start QEMU, you
should see something like this:</p>

<p><img src="/assets/images/2015/04/QEMU_FirstRun.png" alt="The list of supported boards" /></p>

<p>This happened because by default the <em>Board name:</em> field contains a
question mark.</p>

<p>Further configure the debug configuration</p>

<ul>
  <li>in the <em>Eclipse</em> menu, go to <strong>Run</strong> → <strong>Debug Configurations…</strong></li>
  <li>select <strong>hello</strong></li>
  <li>select the <strong>Debugger</strong> tab</li>
  <li>in the <em>Board name:</em> field, enter <strong>STM32-H103</strong> (a popular Olimex STM32F103 board)</li>
  <li>
    <p>in the Command line: field, after hello, add <code class="language-plaintext highlighter-rouge">3 2 1</code>, as an example</p>

    <p><img src="/assets/images/2015/04/HelloDebuggerTabH103.png" alt="The Debugger tab with the board name filled-in" /></p>
  </li>
  <li>click the <strong>Debug</strong> button</li>
</ul>

<p>If everything is ok, after a few seconds required to start the server,
to allow it to connect to the target, start the gdb client, download the
application and start the debugging session, you should see something like
this:</p>

<p><img src="/assets/images/2015/04/HelloFirstDebug.png" alt="The first debug" /></p>

<p>Be sure you enable the <strong>Remember my decision</strong> check box, otherwise Eclipse
will ask this question each and every time you launch this debug
configuration. Then click the <strong>Yes</strong> button.</p>

<p>If everything is ok, after a few seconds required to start QEMU, start
the gdb client, download the application and start the debugging session,
you should see something like this:</p>

<p><img src="/assets/images/2015/04/BreakpointInMain.png" alt="Breakpoint in main()" /></p>

<p>Since the first breakpoint was set in the <strong>Debugger</strong> tab to <strong>main</strong>,
the execution stopped right at the beginning of the <code class="language-plaintext highlighter-rouge">main()</code> function.</p>

<h2 id="debug-operations">Debug operations</h2>

<p>Once the debug session started and execution stopped in the first
breakpoint (by default set at the beginning of the <code class="language-plaintext highlighter-rouge">main()</code> function),
you can perform any debug operation you need.</p>

<p>The most common operations are:</p>

<ul>
  <li>single step over one source instruction (click the <strong>Step Over</strong> button)</li>
  <li>single step into the next function called (click the <strong>Step Into</strong> button)</li>
  <li>single step out of the current function (click the <strong>Step Return</strong> button)</li>
  <li>set breakpoints (click the grey side area at the left of the source lines)</li>
  <li>run (click the <strong>Resume</strong> button)</li>
  <li>halt a running program (click the <strong>Suspend</strong> button)</li>
  <li>inspect processor registers (use the <strong>Registers</strong> view)</li>
  <li>inspect memory (use the <strong>Memory</strong> view)</li>
</ul>

<p>For more details please read the
<a href="http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_debug_prog.htm">Running and debugging projects</a>
section in the Eclipse documentation.</p>

<h2 id="view-consoles">View consoles</h2>

<p>Each debug process has a dedicated console, to display its
standard output and standard error, or to get input for the standard input.</p>

<p>To see the console of any process, select the process in the
top left window. For example the QEMU console will initially look like this:</p>

<p><img src="/assets/images/2015/04/QEMU_Console.png" alt="The QEMU console" /></p>

<p>select again the main thread in the debugged application (in the
upper left window) and click several times the Step Over button,
until you reach the <code class="language-plaintext highlighter-rouge">timer_start()</code> function.</p>

<p><img src="/assets/images/2015/04/HelloSingleSteps.png" alt="Hello single steps" /></p>

<p>The QEMU console should display the program arguments, passed via
semihosting, then exercise various output functions.</p>

<p>Click the <strong>Resume</strong> button and execution will resume. Watch the
console. After three iterations, execution will complete and QEMU
will quit with exit code 0 (success).</p>

<p><img src="/assets/images/2015/04/HelloFinalRun.png" alt="Run the application to completion" /></p>

<p>You can experiment with the first argument, which controls the
number of iterations in the main loop; edit it to 7 and rerun the application.</p>

<h2 id="no-gdb-initialisation-files-loaded">No GDB initialisation files loaded</h2>

<p>For having a total control of the debugging session, the debugging
plug-ins start the GDB client process with the <code class="language-plaintext highlighter-rouge">--nx</code> option, which
prevents the execution of the commands found in any initialization
file; none of the standard files (<code class="language-plaintext highlighter-rouge">system.gdbinit</code>, <code class="language-plaintext highlighter-rouge">~/.gdbinit</code>,
<code class="language-plaintext highlighter-rouge">./.gdbinit</code>) are loaded.</p>

<p>To add more commands to the GDB initialisation sequence, use the
<em>Commands:</em> field in the <em>GDB Client Setup</em> section.</p>

<p>All commands listed here are passed to the GDB client. By convention,
commands prefixed with <code class="language-plaintext highlighter-rouge">mon</code> will be further passed from the GDB client
to the GDB server, in this case the QEMU server.</p>


        


    <div class="tags">
        
    </div>

    

    <hr/>
    <p>Comments on the content of this page that might be useful
    for other readers are welcomed here. For question and general
    support, please use the
    <a href="https://www.tapatalk.com/groups/xpack/">project forums</a>.
    </p>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = '';  // Your page's canonical URL variable
            this.page.identifier = '/debug/qemu/'; // Your page's unique identifier variable
        };

        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://embed-cdt.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-4">
                  <a href="http://www.eclipse.org/">Eclipse Foundation</a><br/>
                  <a href="http://www.eclipse.org/legal/privacy.php">Privacy Policy</a><br/>
                  <a href="http://www.eclipse.org/legal/termsofuse.php">Website terms of use</a><br/>
                  <a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a><br/>
                  <a href="https://www.eclipse.org/security/">Report a Vulnerability</a><br/>
                  <a href="http://www.eclipse.org/legal">Legal</a><br/>
                </div>
                <div class="col-lg-4 footer-center">
                  <a href="https://projects.eclipse.org/projects/iot.embed-cdt/"><img src="/assets/images/2020/ef-small.png" alt="EF logo" ></a>
                </div>
                <div class="col-lg-4 footer">
                  &copy; 2009, 2021 Liviu Ionescu and others. <br />
                  All rights reserved. <br />
                  <span>Page last updated:</span> Jan 21, 2021<br/> Site last generated: Jan 21, 2021 <br />
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>





<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-16767008-19"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-16767008-19');
</script>


</html>
