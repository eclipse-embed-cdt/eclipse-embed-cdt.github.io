<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="How to run Eclipse debug sessions using OpenOCD.">
<meta name="keywords" content=" ">
<title>The OpenOCD debugging plug-in | Eclipse Embedded CDT  (C/C++ Development Tools)™</title>
<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/syntax.css">


<link type="application/atom+xml" rel="alternate" href="https://eclipse-embed-cdt.github.io/feed.xml"/>
<link type="application/rss+xml" rel="alternate" title="" href="https://eclipse-embed-cdt.github.io/feed.xml">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>The OpenOCD debugging plug-in</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="The OpenOCD debugging plug-in" />
<meta name="author" content="Liviu Ionescu" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Tools to manage, configure and build complex, package based, multi-target, C/C++ projects." />
<meta property="og:description" content="Tools to manage, configure and build complex, package based, multi-target, C/C++ projects." />
<link rel="canonical" href="https://eclipse-embed-cdt.github.io/debug/openocd/" />
<meta property="og:url" content="https://eclipse-embed-cdt.github.io/debug/openocd/" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-09-11T18:41:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="The OpenOCD debugging plug-in" />
<script type="application/ld+json">
{"description":"Tools to manage, configure and build complex, package based, multi-target, C/C++ projects.","@type":"BlogPosting","url":"https://eclipse-embed-cdt.github.io/debug/openocd/","headline":"The OpenOCD debugging plug-in","dateModified":"2021-04-29T12:40:56+00:00","datePublished":"2015-09-11T18:41:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://eclipse-embed-cdt.github.io/debug/openocd/"},"author":{"@type":"Person","name":"Liviu Ionescu"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/modern-business.css?202008050934">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/customstyles.css?202008050934">
<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/boxshadowproperties.css?202008050934">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="https://eclipse-embed-cdt.github.io/css/theme-blue.css?202008050934">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://eclipse-embed-cdt.github.io/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="https://eclipse-embed-cdt.github.io/js/toc.js"></script>
<script src="https://eclipse-embed-cdt.github.io/js/customscripts.js"></script>

<!-- Use absolute URLs, to cover preview cases too -->
<link rel="shortcut icon" href="https://eclipse-embed-cdt.github.io/images/favicon/favicon.ico">
<link rel="apple-touch-icon" sizes="57x57" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://eclipse-embed-cdt.github.io/images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://eclipse-embed-cdt.github.io/images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://eclipse-embed-cdt.github.io/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://eclipse-embed-cdt.github.io/images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://eclipse-embed-cdt.github.io/images/favicon/favicon-16x16.png">
<link rel="manifest" href="https://eclipse-embed-cdt.github.io/images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="https://eclipse-embed-cdt.github.io/images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks" style="">
        <div style="display: inline-block; float: left; margin-top: 8px; margin-left: auto; margin-right: 10px;"><img src="/images/company_logo.png" alt="logo" width="32px" height="32px"/></div>
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/">&nbsp;<span class="projectTitle"> Eclipse Embedded CDT (C/C++ Development Tools)™</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">News<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/news/">Latest News</a></li>
                        
                        
                        
                        <li><a href="/news/archive/">Archive</a></li>
                        
                        
                        
                        <li><a href="/plugins/releases/">Plug-ins Releases</a></li>
                        
                        
                        
                        <li><a href="/packages/releases/">Packages Releases</a></li>
                        
                        
                        
                        <li><a href="/tags/">Tags</a></li>
                        
                        
                        
                        <li><a href="/articles/">Articles</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Links<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://www.tapatalk.com/groups/xpack/" target="_blank" rel="noopener">The Project Forums</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://gitter.im/xpack/" target="_blank" rel="noopener">The Project Chat Room</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://www.eclipse.org" target="_blank" rel="noopener">Eclipse</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://projects.eclipse.org/projects/iot.embed-cdt/" target="_blank" rel="noopener">Eclipse Embedded CDT Project</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://marketplace.eclipse.org/content/eclipse-embedded-cdt/" target="_blank" rel="noopener">Eclipse Marketplace</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://xpack.github.io" target="_blank" rel="noopener">The xPack Project</a></li>
                        
                        
                        
                        <li><a class="extern" href="http://micro-os-plus.github.io" target="_blank" rel="noopener">µOS++</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://gnu-mcu-eclipse.github.io" target="_blank" rel="noopener">GNU MCU Eclipse (deprecated)</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">GitHub<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://github.com/eclipse-embed-cdt/" target="_blank" rel="noopener">Eclipse Embedded CDT</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack/" target="_blank" rel="noopener">xPack Core Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack-dev-tools/" target="_blank" rel="noopener">3rd Party xPack Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpacks/" target="_blank" rel="noopener">3rd Party xPacks</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/micro-os-plus/" target="_blank" rel="noopener">µOS++</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="The OpenOCD debugging plug-in">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3 sticky" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  
  
  <li>
      <a title="Getting Started" href="#">Getting Started</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Features" href="/plugins/features/">Features</a></li>
          
          
          
          
          
          
          <li><a title="Prerequisites" href="/plugins/prerequisites/">Prerequisites</a></li>
          
          
          
          
          
          
          <li><a title="Install a New Eclipse" href="/plugins/install/">Install a New Eclipse</a></li>
          
          
          
          
          
          
          <li><a title="Update an Existing Eclipse" href="/plugins/update/">Update an Existing Eclipse</a></li>
          
          
          
          
          
          
          <li><a title="Install Optional Features" href="/plugins/install-new-software/">Install Optional Features</a></li>
          
          
          
          
          
          
          <li><a title="Alternate Install Methods" href="/plugins/install-alternate/">Alternate Install Methods</a></li>
          
          
          
          
          
          
          <li><a title="Workspace Preferences" href="/eclipse/workspace/preferences/">Workspace Preferences</a></li>
          
          
          
          
          
          
          <li><a title="CMSIS Packs" href="/plugins/packs-manager/">CMSIS Packs</a></li>
          
          
          
          
          
          
          <li><a title="SEGGER J-Link" href="/debug/jlink/install/">SEGGER J-Link</a></li>
          
          
          
          
          
          
          <li><a title="Troubleshoot" href="/plugins/troubleshoot/">Troubleshoot</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Debug" href="#">Debug</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/debug/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Install" href="/debug/install/">Install</a></li>
          
          
          
          
          
          
          <li><a title="J-Link" href="/debug/jlink/">J-Link</a></li>
          
          
          
          
          
          
          <li class="active"><a title="OpenOCD" href="/debug/openocd/">OpenOCD</a></li>
          
          
          
          
          
          
          <li><a title="OpenOCD RISC-V" href="/debug/openocd/riscv/">OpenOCD RISC-V</a></li>
          
          
          
          
          
          
          <li><a title="QEMU Arm" href="/debug/qemu/">QEMU Arm</a></li>
          
          
          
          
          
          
          <li><a title="Assign CMSIS Device" href="/eclipse/project/assign-device/">Assign CMSIS Device</a></li>
          
          
          
          
          
          
          <li><a title="Peripheral Registers" href="/debug/peripheral-registers/">Peripheral Registers</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Tutorials" href="#">Tutorials</a>
      <ul>
          
          
          
          <li><a title="Blinky Arm Tutorial" href="/tutorials/blinky-arm/">Blinky Arm Tutorial</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="How It Works" href="#">How It Works</a>
      <ul>
          
          
          
          <li><a title="The Managed Build System" href="/eclipse/cdt/managed-build/">The Managed Build System</a></li>
          
          
          
          
          
          
          <li><a title="The CDT Indexer" href="/eclipse/cdt/indexer/">The CDT Indexer</a></li>
          
          
          
          
          
          
          <li><a title="The Hardware Debug Plug-ins" href="/eclipse/cdt/hardware-debug/">The Hardware Debug Plug-ins</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Project Templates" href="#">Project Templates</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/templates/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="STM32Fxx Templates" href="/templates/stm32f/">STM32Fxx Templates</a></li>
          
          
          
          
          
          
          <li><a title="KLxx Templates" href="/templates/klxx/">KLxx Templates</a></li>
          
          
          
          
          
          
          <li><a title="Generic Cortex-M Template" href="/templates/cortexm/">Generic Cortex-M Template</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Releases" href="#">Releases</a>
      <ul>
          
          
          
          <li><a title="Plug-ins Releases" href="/plugins/releases/">Plug-ins Releases</a></li>
          
          
          
          
          
          
          <li><a title="Packages Releases" href="/packages/releases/">Packages Releases</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Support" href="#">Support</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/support/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="FAQ" href="/support/faq/">FAQ</a></li>
          
          
          
          
          
          
          <li><a title="Known Issues" href="/support/known-issues/">Known Issues</a></li>
          
          
          
          
          
          
          <li><a class="extern" title="The Project Forums" href="https://www.tapatalk.com/groups/xpack/" target="_blank" rel="noopener">The Project Forums</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Contributor Info" href="#">Contributor Info</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/develop/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Links" href="/develop/links/">Links</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Maintainer Info" href="#">Maintainer Info</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/maintain/">Overview</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Project" href="#">Project</a>
      <ul>
          
          
          
          <li><a class="extern" title="License (EPL-2)" href="https://www.eclipse.org/legal/epl-2.0/" target="_blank" rel="noopener">License (EPL-2)</a></li>
          
          
          
          
          
          
          <li><a title="About" href="/about/">About</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">The OpenOCD debugging plug-in</h1>
</div>



<div class="post-content">

   
    <div class="summary">How to run Eclipse debug sessions using OpenOCD.
</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


   <h2 id="why-a-new-plug-in">Why a new plug-in?</h2>

<p>By default, Eclipse supports OpenOCD via the GDB Hardware Debugging
plug-in, which starts OpenOCD not as a separate daemon, but as a
pipe end. This is functional, but restricts it even further.</p>

<p>Based on the experience with the J-Link plug-in, we decided to add
a separate OpenOCD plug-in, with full configuration pages.</p>

<p>In early 2015, a step further was performed, with the addition of
the GNU MCU Eclipse OpenOCD subproject, a new distribution of OpenOCD.
In 2019 it was migrated to the xPack project.</p>

<p>Unfortunately SWD support in the current OpenOCD version (0.8.x) is
not that great, and we could not yet figure out a way to get the SWO
tracing info out of OpenOCD, so currently there is no special tracing
window available.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before being able to use any JTAG probe with OpenOCD, you must separately install:</p>

<ul>
  <li>the OpenOCD debugging plug-in</li>
  <li>the GDB debugger (client) application, as part of a GNU toolchain</li>
  <li>the OpenOCD as a GDB server</li>
  <li>any drivers required for the JTAG probe (for example FTDI drivers).</li>
</ul>

<p>If you did not do it yet, please follow the instructions in the
<a href="https://xpack.github.io/openocd/">xPack OpenOCD install</a> page and return
when completed.</p>

<p>The presence of a GDB as part of a GNU toolchain is mandatory, and it
is recommended that the version of the GDB client matches the toolchain.
Generally only debugging .elf applications is possible, and these
applications must be compiled to include GNU compatible debugging
information (like dwarf).</p>

<h3 id="non-gnu-toolchains">Non-GNU toolchains</h3>

<p>Debugging applications generated by <strong>non-GNU toolchains</strong>
(like the obsolete Arm CC), although not completely excluded,
is <strong>not supported</strong>.</p>

<h2 id="how-to-use-the-openocd-plug-in">How to use the OpenOCD plug-in</h2>

<h3 id="define-the-openocd-folder-location">Define the OpenOCD folder location</h3>

<p>Before starting work with OpenOCD, it is recommended to define the
path to the folder where OpenOCD executables are located.</p>

<ul>
  <li>
    <p>in the <em>Eclipse</em> menu, go to <strong>(Window →) Preferences</strong> → <strong>MCU</strong> →
<strong>Global OpenOCD Path</strong> (or <strong>Workspace OpenOCD Path</strong>)</p>

    <p><img src="/assets/images/2018/preferences-mcu-openocd-path.png" alt="OpenOCD preferences page" /></p>
  </li>
  <li>click the <strong>Restore Defaults</strong> button</li>
  <li>the plug-in will suggest the default values computed when Eclipse
started; if a new version of OpenOCD was installed while Eclipse was
active, restart Eclipse and click again the Restore Defaults button</li>
  <li>check the <strong>Executable</strong> field; it must define the name of the command
line OpenOCD executable; in most cases it should be set correctly; if not,
edit it to match the correct name;</li>
  <li>check the <strong>Folder</strong> field; it must point to the actual folder where
the OpenOCD tools were installed on your platform, for example <code class="language-plaintext highlighter-rouge">C:\Users\ilg\AppData\Roaming\xPacks\OpenOCD\&lt;version&gt;\bin</code>
on Windows, <code class="language-plaintext highlighter-rouge">/Users/ilg/opt/xPacks/openocd/&lt;version&gt;/bin</code> on macOS
and GNU/Linux</li>
  <li>click the <strong>OK</strong> button</li>
</ul>

<p>By default, the GDB server is defined as
<code class="language-plaintext highlighter-rouge">${openocd_path}/${openocd_executable}</code>; these two macros are
automatically set by the above preference page; for portability
reasons, it is recommended to define the path to the OpenOCD relative
to this variable in all your debug configurations, to have a single
place to update the path when you want to use another version of
the OpenOCD tools installed in a different location.</p>

<h3 id="create-the-debugger-configuration">Create the debugger configuration</h3>

<p>Being a standard debugger, this plug-in also uses the Eclipse
standard method of creating debugger configurations for each
application. After you successfully build your application,
you can create a new debug configuration following these steps:</p>

<ul>
  <li>select the project (don’t skip it, this is important, see later)</li>
  <li>build it and ensure the executable file is available</li>
  <li>expand the Debug/Release folder and select the new executable file</li>
  <li>in the <em>Eclipse</em> menu, go to <strong>Run</strong> → <strong>Debug Configurations…</strong> or
select the down arrow at the right of the bug icon</li>
  <li>
    <p>double click on the <strong>GDB OpenOCD Debugging</strong> group, or select it
and click the top leftmost <strong>New</strong> button</p>

    <p><img src="/assets/images/2013/12/OpenOCDDebugConfigs.png" alt="OpenOCD debug configurations" /></p>
  </li>
  <li>a multi-tab page will be displayed</li>
  <li>
    <p>if you started this procedure with the executable file selected,
the first tab, named <strong>Main</strong>, should be already filled in with the
project name (for example blink1) and the application file name and
location (for example <code class="language-plaintext highlighter-rouge">Debug/blink1.elf</code>).</p>

    <p><img src="/assets/images/2013/12/OpenOCDMainTab.png" alt="The OpenOCD Main tab" /></p>
  </li>
  <li>
    <p>click the second tab, named <strong>Debugger</strong>, which contains the
configuration options required to start the GDB server and the GDB client</p>

    <p><img src="/assets/images/2018/openocd-debugger-tab.png" alt="OpenOCD Debugger tab" /></p>
  </li>
  <li>the only field that usually requires attention is the OpenOCD
Setup <strong>Other options:</strong>, where you should add one or more
configuration scripts; for example, for the STM32F4DISCOVERY
board, the field should read <code class="language-plaintext highlighter-rouge">-f board/stm32f4discovery.cfg</code></li>
</ul>

<blockquote>
  <p>Note: it is mandatory to enter a reference to a configuration
script here, otherwise the debug session will not start. Use the
OpenOCD documentation for details on how to start OpenOCD for various boards.</p>
</blockquote>

<ul>
  <li>Windows notice: due to a platform specific issue, on Windows it is
not possible to disable the <em>Allocate console for OpenOCD</em></li>
  <li>
    <p>click the third tab, named <strong>Startup</strong>, which contains some
specific OpenOCD options used to configure the debug session;
defaults are generally enough</p>

    <p><img src="/assets/images/2013/12/OpenOCDStartupTab.png" alt="The OpenOCD Startup tab" /></p>
  </li>
  <li>the order of sections/fields reflect the order commands are
sent to GDB; for example the above generates:</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">monitor reset init
monitor halt
</span><span class="c">...
</span><span class="go">monitor arm semihosting enable
symbol-file "/.../blink1/Debug/blink1.elf"
load "/.../blink1/Debug/blink1.elf"
tbreak main
monitor reset halt
monitor halt
</span><span class="c">...
</span><span class="go">continue
</span></code></pre></div></div>

<ul>
  <li>
    <p>select the <strong>Common</strong> tab, set the <em>Save as:</em> field to
<strong>Shared file</strong> and accept the current project name</p>

    <p><img src="/assets/images/2013/12/OpenOCDCommonTab.png" alt="Shared debug configuration" /></p>
  </li>
  <li>
    <p>this will arrange for the debug configuration to be saved in
the project, not in the workspace storage</p>

    <p><img src="/assets/images/2013/12/OpenOCDSharedDebug.png" alt="Debug configuration stored in the project" /></p>
  </li>
  <li>click the <strong>Apply</strong> button</li>
  <li>click the <strong>Close</strong> button</li>
</ul>

<h2 id="start-a-debug-session">Start a debug session</h2>

<p>Before starting a debug session, be sure that:</p>

<ul>
  <li>the JTAG probe is connected to the computer; if the connection
is via USB, use a high speed USB port, preferably directly to the
computer, not via hubs which share the bandwidth with other traffic
intensive devices, like disks, wi-fi, video cameras, etc.</li>
  <li>the wide JTAG flat cable is connected both to the JTAG probe
and to the target device</li>
  <li>the target device is powered on</li>
</ul>

<p>With all the above steps completed properly, you can start the
debug session:</p>

<ul>
  <li>in the <em>Eclipse</em> menu, go to <strong>Run</strong> → <strong>Debug Configurations…</strong></li>
  <li>if necessary, expand the <strong>GDB OpenOCD Debugging</strong> group</li>
  <li>select the newly defined configuration</li>
  <li>click the <strong>Debug</strong> button</li>
</ul>

<p>Alternatively, for later sessions, you can use the bug specific
icon. Do not press it directly, since it will not behave as
expected; instead, click the down arrow button:</p>

<p><img src="/assets/images/2013/12/OpenOCDStartDebugArrow.png" alt="Down arrow debug" /></p>

<p>This will open a new window where you can select the desired
debug configuration:</p>

<p><img src="/assets/images/2013/12/DebugSelection.png" alt="Select the debug configuration" /></p>

<p>If everything is ok, after a few seconds required to start the server,
to allow it to connect to the target, start the gdb client, download
the application and start the debugging session, you should see
something like this:</p>

<p><img src="/assets/images/2013/12/OpenOCDConsoles.png" alt="The new debug session, with two consoles" /></p>

<p>Since the first breakpoint was set in the <strong>Debugger</strong> tab to
<strong>main</strong>, the execution stopped right at the beginning of the
<code class="language-plaintext highlighter-rouge">main()</code> function, which in this case is a tracing <code class="language-plaintext highlighter-rouge">printf()</code>.</p>

<h2 id="debug-operations">Debug operations</h2>

<p>Once the debug session started and execution stopped in the
first breakpoint (by default set at the beginning of the <code class="language-plaintext highlighter-rouge">main()</code>
function), you can perform any debug operation you need.</p>

<p>The most common operations are:</p>

<ul>
  <li>single step over one source instruction (click the <strong>Step Over</strong> button)</li>
  <li>single step into the next function called (click the <strong>Step Into</strong> button)</li>
  <li>single step out of the current function (click the <strong>Step Return</strong> button)</li>
  <li>set breakpoints (click the grey side area at the left of the source lines)</li>
  <li>run (click the <strong>Resume</strong> button)</li>
  <li>halt a running program (click the <strong>Suspend</strong> button)</li>
  <li>inspect processor registers (use the <strong>Registers</strong> view)</li>
  <li>inspect memory (use the <strong>Memory</strong> view)</li>
</ul>

<p>For more details please read the
<a href="http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_debug_prog.htm">Running and debugging projects</a>
section in the Eclipse documentation.</p>

<h2 id="view-consoles">View consoles</h2>

<p>Each debug process has a dedicated console, to display its standard
output and standard error, or to get input for the standard input.</p>

<p>To see the console of any process, select the process in the top
left window. For example the gdb client console might look like this:</p>

<p><img src="/assets/images/2013/12/OpenOCDclientConsole.png" alt="The GDB client console" /></p>

<p>The semihosting tracing messages are displayed in the same window
as the OpenOCD output:</p>

<p><img src="/assets/images/2013/12/OpenOCDTraceConsole.png" alt="The tracing console" /></p>

<h2 id="show-console-when-standard-outerror-change">Show console when standard out/error change</h2>

<p>This is the default Eclipse behaviour when multiple consoles are
active, to automatically switch to the latest updated. In our case,
especially when the tracing console is also active, the focus will
jump between windows, making things impossible to follow.</p>

<p>This mode can be identified by the status of the buttons on the right
side of the Debugging view.</p>

<p><img src="/assets/images/2013/12/OpenOCDShowConsole.png" alt="Show console when standard out/err changes" /></p>

<p>To make the display stable on the desired console, disable both
buttons. To switch between consoles, select them either in the
top left Debug view, or using the right button, as shown above.</p>

<h2 id="the-restart-button">The Restart button</h2>

<p>Apparently not a big deal, but quite useful for repeated debug
sessions, <strong>the Restart button</strong> can be used at any time during
a debug session, and the result is that a reset is dispatched to
the target board via the JTAG/SWD interface and the debug session
is restarted.</p>

<p><img src="/assets/images/2013/12/RestartButton.png" alt="The restart button" /></p>

<p>Note: Due to some bugs in Eclipse, the implementation of this
simple button has encountered several problems. Depending on
the version you are using, the first time you click this button
you might get a message box informing that the button was not
enabled. Ignore this message, close the message box and click
the button again, this time it’ll be effective.</p>

<h2 id="using-a-remote-gdb-server">Using a remote GDB server</h2>

<p>If, for any reason, you need to run the GDB server on a remote
machine (for example the development board is connected via
OpenOCD to a machine in your office, but you are in another
location), you can still use the plug-in to run debugging session.
For this to work, just disable <strong>Start the GDB server locally</strong>
in the <strong>Debugger</strong> tab and instead of <em>localhost</em> for the
<strong>Host name or IP address</strong>, enter the name or address where
the GDB server can be accessed.</p>

<p>Then you must manually start the OpenOCD process on the remote
machine and only then you can start the debugging session.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="missing-or-wrong-openocd_path">Missing or wrong openocd_path</h3>

<p>The most common failure to start a debug session is a missing or incorrec
OpenOCD path. Without it, the launching sequence will
complain <em>Cannot run program “/openocd”</em>.</p>

<p><img src="/assets/images/2013/12/OpenOCDCannotRun.png" alt="Cannot run OpenOCD" /></p>

<p>Define the <strong>openocd_path</strong> as instructed above and the session
should start properly.</p>

<h3 id="wrong-configuration-selection">Wrong configuration selection</h3>

<p>If the configuration files that you selected in the plug-in does
not match the device physically connected, the OpenOCD starts,
but remains in a confused state. The session does not start
and usually requires to restart Eclipse.</p>

<p>Select the correct device and the session should start properly.</p>

<h3 id="start-openocdmanually">Start OpenOCD manually</h3>

<p>If you still fail to configure the plug-in to start OpenOCD
automatically, proceed as when using a remote GDB server, i.e.
go to the Debugger tab and disable the <strong>Start OpenOCD locally</strong>,
then start it manually in a separate terminal. Tweak the command
line options until you get the right behaviour, and then retry
the same options with the plug-in.</p>

<h3 id="quote-the-entire-echo-command">Quote the entire <code class="language-plaintext highlighter-rouge">echo</code> command</h3>

<p>The syntax required by the OpenOCD <code class="language-plaintext highlighter-rouge">echo</code> command is a single
string, in other words both echo and the message must be in the
same string. To achieve this in a shell, the string must be quoted:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">-c 'echo "Started by GNU MCU Eclipse"'
</span></code></pre></div></div>

<p>Note: this command is used by the plug-in to detect when the GDB
server is initialised and ready to receive commands. It is not
necessary when starting OpenCOD manually.</p>

<h3 id="chase-for-hangedopenocd-processes">Chase for hanged OpenOCD processes</h3>

<p>One usual error case is to retry a debug session while a previous
OpenOCD is still active (either running or hanged, started by a
previous run of the plug-in or manually). In this case the new
OpenOCD has no chance to work, and the plug-in will most
certainly fail, sometimes even without clear error messages.</p>

<p>Be sure you chase and kill all previous OpenOCD or GDB processes,
using the system process inspector, before starting new debug sessions.</p>

<h3 id="compare-with-gdb-hardware-debugging">Compare with GDB Hardware Debugging</h3>

<p>If you still cannot make it work, before filling any support tickets,
please try to launch the debug session using the GDB Hardware
Debugging plug-in, in the DSF launcher configuration (not the
Legacy GDB Hardware Debugging Launcher). If you get the same
behaviour, the problem is OpenOCD related (OpenOCD is notorious
for subtle bugs), and cannot be fixed in the plug-in.</p>

<p>If the GDB Hardware Debugging plug-in works and the GDB OpenOCD
debugging plug-in doesn’t, rerun both of them with the log enabled,
on exactly the same executable, and compare the results. If you do
not discover the problem, open a support ticket and attach the log files.</p>

<h2 id="no-gdb-initialisation-files-loaded">No GDB initialisation files loaded</h2>

<p>For having a total control of the debugging session, the debugging
plug-ins start the GDB client process with the <code class="language-plaintext highlighter-rouge">--nx</code> option, which
prevents the execution of the commands found in any initialization
file; none of the standard files (<code class="language-plaintext highlighter-rouge">system.gdbinit</code>, <code class="language-plaintext highlighter-rouge">~/.gdbinit</code>,
<code class="language-plaintext highlighter-rouge">./.gdbinit</code>) are loaded.</p>

<p>To add more commands to the GDB initialisation sequence, use the
<em>Commands:</em> field in the <em>GDB Client Setup</em> section.</p>

<p>All commands listed here are passed to the GDB client. By
convention, commands prefixed with <code class="language-plaintext highlighter-rouge">mon</code> will be further passed
from the GDB client to the GDB server, in this case the OpenOCD server.</p>

<h2 id="semihosting-writes-are-very-slow">Semihosting writes are very slow</h2>

<p>Yes, unfortunately this is an OpenOCD limitation. Avoid writing
to <code class="language-plaintext highlighter-rouge">stderr</code>, which is excruciatingly slow.</p>

<h2 id="more-details">More details</h2>

<p>Although the plug-in takes care of most of the configuration
options, and provides reasonable defaults for the usual cases,
it is recommended to read the OpenOCD manuals, available in the
<strong>doc</strong> folder of your install location.</p>


        


    <div class="tags">
        
    </div>

    

    <hr/>
    <p>Comments on the content of this page that might be useful
    for other readers are welcomed here. For question and general
    support, please use the
    <a href="https://www.tapatalk.com/groups/xpack/">project forums</a>.
    </p>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = '';  // Your page's canonical URL variable
            this.page.identifier = '/debug/openocd/'; // Your page's unique identifier variable
        };

        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://embed-cdt.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-4">
                  <a href="http://www.eclipse.org/">Eclipse Foundation</a><br/>
                  <a href="http://www.eclipse.org/legal/privacy.php">Privacy Policy</a><br/>
                  <a href="http://www.eclipse.org/legal/termsofuse.php">Website terms of use</a><br/>
                  <a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a><br/>
                  <a href="https://www.eclipse.org/security/">Report a Vulnerability</a><br/>
                  <a href="http://www.eclipse.org/legal">Legal</a><br/>
                </div>
                <div class="col-lg-4 footer-center">
                  <a href="https://projects.eclipse.org/projects/iot.embed-cdt/"><img src="/assets/images/2020/ef-small.png" alt="EF logo" ></a>
                </div>
                <div class="col-lg-4 footer">
                  &copy; 2009, 2021 Liviu Ionescu and others. <br />
                  All rights reserved. <br />
                  <span>Page last updated:</span> Apr 29, 2021<br/> Site last generated: Apr 29, 2021 <br />
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>





<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-16767008-19"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-16767008-19');
</script>


</html>
